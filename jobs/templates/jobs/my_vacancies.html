{% extends "jobs/layout.html" %}

{%block title%}Minhas Vagas{%endblock%}

{%block body%}


<div class="vacancy-list container">
    <table class="">
        <thead>
            <tr class="tr-button-view-all-vacancy">
                <td class="button-view-all-vacancy" colspan="4">

                    <a href="{% url 'jobs:index' %}">
                        <input type="text" class="btn btn-outline-primary" value="Ver todas as vagas">
                    </a>
                </td>

            </tr>
            <tr>
                <th class="vacancy-list-name" colspan="1">Últimas vagas publicadas</th>
                <th colspan="3">Total de vagas: {{ vacancies_count }}</th>
            </tr>

        </thead>

        <tbody>



            {% for company, vancancies in vacancies_grouped_by_company.items %}

            <tr class="date-vacancy">
                <td class="" colspan="4">
                    Data da Publicação: {{ company }}
                </td>
            </tr>
  
            {% for vacancy in vancancies %}
            <tr class="vacancy-list-tr-description ">

                <td class="vacancy-title">
                    <a href="{% url 'jobs:view_vacancy' vacancy.id%}">

                        {{ vacancy.title|capfirst}}
                    </a>
                </td>
                <td class="vacancy-list-location">{{ vacancy.country }} / {{ vacancy.state }} / {{ vacancy.city }}
                </td>
                <td class="vacancy-list-type"> {{ vacancy.contract_type|capfirst}}</td>
                <td>
                    <div class="">
                        <button
                            class="btn {% if vacancy.is_active == True %}btn-outline-danger{% else %}btn-outline-success{% endif %} btn-sm active-vacancy"
                            data-id="{{ vacancy.id }}">
                            {% if vacancy.is_active == True %}
                            Fechar Vaga
                            {% else %}
                            Abrir Vaga
                            {% endif %}
                        </button>
                    </div>
                </td>

            </tr>




            {% endfor %}

            <tr class="div-ads-video">
                <td>

                    <div class="video-ad">

                    </div>

                </td>
            </tr>
            {% empty %}

            <tr class=" .alert-vacancy vacancy-list-tr">

                <td class="message message-no-vacancy alert alert-info" colspan="3">
                    Não há vagas para:
                    <div>

                        {% for chave, valor in return_search.items %}
                        <strong>{{ chave|capfirst }}</strong>: {{ valor|upper }}
                        {% endfor %}
                    </div>
                </td>

            </tr>


            {% endfor %}



        </tbody>
    </table>

</div>

{%endblock%}